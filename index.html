<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FUCK SHYNESS – BLUSH OR DIE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a0000">
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="icon" href="/icons/app-icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/icons/app-icon.svg">
  <style>
    :root {
      --bg: #0a0000;
      --card: #0f0000;
      --blood: #ff1a1a;
      --fire: #ff4d00;
      --gold: #ffaa00;
      --text: #ffffff;
      --muted: #ff6b6b;
      --dark: #1a0000;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: linear-gradient(135deg, #000000, #1a0000);
      color: var(--text);
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      font-weight: 600;
      letter-spacing: 0.5px;
      display: flex;
      justify-content: center;
      padding: 10px;
    }
    .app { max-width: 480px; width:100%; margin:auto; }
    .card {
      background: var(--card);
      border: 2px solid var(--blood);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.8);
    }
    h1 {
      font-size: 28px;
      text-align: center;
      color: #ffffff;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 4px;
    }
    .tagline {
      text-align: center;
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 12px;
    }
    .pill {
      display: inline-block;
      background: var(--blood);
      color: #000;
      font-weight: 900;
      font-size: 13px;
      padding: 6px 14px;
      border-radius: 30px;
      margin: 0 auto;
      display: block;
      width: fit-content;
    }

    /* Clean, readable, but still brutal belief card */
    .belief-card {
      background: var(--dark);
      border: 1px solid var(--blood);
      padding: 18px;
      border-radius: 16px;
      margin: 20px 0;
      text-align: center;
      font-size: 15px;
      line-height: 1.5;
      color: #ff9999;
      font-weight: 700;
      box-shadow: 0 4px 20px rgba(255,26,26,0.15);
    }

    .today-summary {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin: 20px 0;
    }
    .stat-card, .goal-card {
      background: var(--dark);
      border: 1px solid #660000;
      border-radius: 14px;
      padding: 16px;
      text-align: center;
    }
    .stat-label {
      font-size: 13px;
      color: var(--muted);
      margin-bottom: 6px;
    }
    .stat-value {
      font-size: 52px;
      font-weight: 900;
      color: var(--gold);
      line-height: 1;
    }
    .progress-bar {
      height: 12px;
      background: #1a0000;
      border-radius: 6px;
      overflow: hidden;
      margin: 10px 0;
      border: 1px solid #660000;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(to right, var(--fire), var(--blood));
      width: 0%;
      transition: width 0.5s ease-out;
    }

    textarea {
      width: 100%;
      background: var(--dark);
      border: 1px solid #660000;
      color: #fff;
      padding: 14px;
      border-radius: 12px;
      font-size: 15px;
      margin: 16px 0;
      resize: vertical;
    }
    textarea::placeholder { color: #993333; }

    button {
      cursor: pointer;
      border: none;
      border-radius: 16px;
      padding: 18px;
      font-size: 15px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 1px;
      min-height: 90px;
      transition: all 0.2s;
    }
    button:active { transform: scale(0.97); }

    .btn-action   { background: #222; border: 2px solid #666; color: #fff; }
    .btn-blush    { background: #990000; color: #ff9999; border: 2px solid var(--blood); }
    .btn-jackpot  { background: var(--gold); color: #000; border: 2px solid #ffaa00; }

    .btn-points {
      font-size: 20px;
      font-weight: 900;
      display: block;
      margin-bottom: 4px;
    }

    .today-list {
      background: var(--dark);
      border: 1px solid #660000;
      border-radius: 14px;
      padding: 10px;
      max-height: 260px;
      overflow-y: auto;
      margin-top: 20px;
    }
    .event-row {
      padding: 12px 8px;
      border-bottom: 1px solid #330000;
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: #ff9999;
    }
    .event-row:last-child { border-bottom: none; }
    .event-points { color: var(--gold); font-weight: 900; }

    .status {
      text-align: center;
      font-size: 17px;
      font-weight: 800;
      margin: 16px 0;
      line-height: 1.4;
    }
    .status.met { color: #00ff00; }
    .status.over { color: #ffff00; }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <h1>FUCK SHYNESS</h1>
      <p class="tagline">Blush or stay a coward forever</p>
      <div class="pill">5-second rule or die</div>

      <div class="belief-card" id="beliefText">
        Blushing hits like getting caught buck-naked — heart slamming, skin on fire — and that exact moment of total exposure is the most addictive, liberating high I’ve ever felt.
      </div>

      <div class="today-summary">
        <div class="stat-card">
          <div class="stat-label">Today</div>
          <div class="stat-value" id="todayPoints">0</div>
        </div>
        <div class="goal-card">
          <div class="stat-label">War Goal</div>
          <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
          <div style="margin-top:8px; color:#ff6b6b;">10 pts = you showed up</div>
        </div>
      </div>

      <textarea id="noteInput" placeholder="What the hell did you do?"></textarea>

      <div style="display:grid; gap:12px;">
        <button class="btn-action" data-type="action">
          <div class="btn-points">+1</div>
          <div>I acted before the bitch voice won</div>
        </button>

        <button class="btn-blush" data-type="blush">
          <div class="btn-points">+5</div>
          <div>I blushed hard<br>and still raised my head</div>
        </button>

        <button class="btn-jackpot" data-type="jackpot">
          <div class="btn-points">JACKPOT +10</div>
          <div>I laughed at it:<br>“Yeah I’m shy — what now?”</div>
        </button>
      </div>

      <div class="status under" id="todayStatusText">
        <strong>0 points = you’re still a prisoner.<br>Go make yourself burn right now.</strong>
      </div>

      <div class="today-list" id="todayList">
        <div style="text-align:center; padding:30px; color:#993333; font-size:15px;">
          No kills today.<br>First one is the hardest — and the one that changes everything.
        </div>
      </div>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js').catch((err) => {
          console.error('Service worker registration failed', err);
        });
      });
    }

    const DAILY_GOAL = 10;
    const POINTS = { action: 1, blush: 5, jackpot: 10 };
    const LABELS = { action: "Acted fast", blush: "Blushed + Owned", jackpot: "JACKPOT" };

    const BELIEFS = [
      "Blushing hits like getting caught buck-naked — heart slamming, skin on fire — and that exact moment of total exposure is the most addictive, liberating high I’ve ever felt.",
      "Stand tall through the blush = people smell blood and respect the killer. Hide = you castrate yourself in public.",
      "The real orgasm is staring the heat dead in the eyes and growling “Come harder.” That second is when I become violently alive.",
      "Dodging the blush = I murder tomorrow’s me for an audience that forgets me in 5 minutes. Eating it = I forge the man I respect.",
      "The blush lasts 论证10 seconds. The pride of stepping in burns all day. The regret of pussing out rots in my soul forever."
    ];

    let beliefIndex = 0;
    function rotateBelief() {
      document.getElementById("beliefText").textContent = BELIEFS[beliefIndex];
      beliefIndex = (beliefIndex + 1) % BELIEFS.length;
    }
    setInterval(rotateBelief, 13000);
    rotateBelief();

    function getTodayKey() { return new Date().toISOString().slice(0,10); }
    function loadEvents() { try { return JSON.parse(localStorage.getItem("shynessGameEvents")||"[]"); } catch(e) { return []; } }
    function saveEvents(e) { localStorage.setItem("shynessGameEvents", JSON.stringify(e)); }

    function addEvent(type, note) {
      const events = loadEvents();
      const now = new Date();
      events.push({ id: now.getTime(), date: getTodayKey(), time: now.toTimeString().slice(0,5), type, points: POINTS[type], note: note||"" });
      saveEvents(events);
      renderAll();
      rotateBelief();
    }

    function renderAll() {
      const todayKey = getTodayKey();
      const todayEvents = loadEvents().filter(e => e.date === todayKey);
      const total = todayEvents.reduce((s,e)=>s+e.points,0);

      document.getElementById("todayPoints").textContent = total;
      document.getElementById("progressFill").style.width = Math.min(total/DAILY_GOAL*100,100)+"%";

      const statusEl = document.getElementById("todayStatusText");
      if (total === 0) {
        statusEl.className = "status under";
        statusEl.innerHTML = "<strong>0 points = you’re still a prisoner.<br>Go make yourself burn right now.</strong>";
      } else if (total < DAILY_GOAL) {
        statusEl.className = "status under";
        statusEl.innerHTML = `<strong>${total} pts — you started.</strong><br>Keep hunting.`;
      } else if (total === DAILY_GOAL) {
        statusEl.className = "status met";
        statusEl.innerHTML = "<strong>GOAL SMASHED.</strong><br>Anything more is extra kills.";
      } else {
        statusEl.className = "status over";
        statusEl.innerHTML = `<strong>+${total - DAILY_GOAL} EXTRA — YOU’RE A FUCKING BEAST.</strong>`;
      }

      const list = document.getElementById("todayList");
      list.innerHTML = "";
      if (todayEvents.length === 0) {
        list.innerHTML = `<div style="text-align:center;padding:30px;color:#993333;font-size:15px;">No kills today.<br>First one is the hardest — and the one that changes everything.</div>`;
      } else {
        todayEvents.sort((a,b)=>b.id-a.id).forEach(e => {
          list.innerHTML += `
            <div class="event-row">
              <div>${LABELS[e.type]}${e.note ? ' – '+e.note : ''}</div>
              <div><span class="event-points">+${e.points}</span> ${e.time}</div>
            </div>`;
        });
      }
    }

    document.querySelectorAll("button[data-type]").forEach(btn => {
      btn.onclick = () => {
        const note = document.getElementById("noteInput").value.trim();
        addEvent(btn.dataset.type, note);
        document.getElementById("noteInput").value = "";
      };
    });

    renderAll();
  </script>
</body>
</html>
