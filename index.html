<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>FUCK SHYNESS – BLUSH OR DIE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a0000">
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="icon" href="/icons/app-icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/icons/app-icon.svg">
  <style>
    :root {
      --bg: radial-gradient(circle at 20% 20%, rgba(255,64,64,0.1), transparent 25%),
             radial-gradient(circle at 80% 0%, rgba(255,170,0,0.15), transparent 32%),
             radial-gradient(circle at 50% 90%, rgba(255,77,0,0.2), transparent 28%),
             #070303;
      --card: rgba(12, 3, 3, 0.85);
      --blood: #ff1a1a;
      --fire: #ff4d00;
      --gold: #ffcc33;
      --text: #f7f5f5;
      --muted: #ff7b7b;
      --dark: #150505;
      --border: rgba(255, 26, 26, 0.25);
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
      font-weight: 600;
      letter-spacing: 0.35px;
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .app { max-width: 560px; width:100%; margin:auto; }

    .card {
      position: relative;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 22px;
      padding: 22px;
      box-shadow: 0 10px 50px rgba(0,0,0,0.8), inset 0 1px 0 rgba(255,255,255,0.04);
      overflow: hidden;
    }
    .card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,77,0,0.07), rgba(0,0,0,0));
      pointer-events: none;
    }

    h1 {
      font-size: 30px;
      text-align: center;
      color: #ffffff;
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 6px;
    }
    .tagline {
      text-align: center;
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 14px;
    }
    .pill-row {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }
    .pill {
      background: linear-gradient(135deg, var(--blood), #8b0000);
      color: #000;
      font-weight: 900;
      font-size: 12px;
      padding: 8px 16px;
      border-radius: 999px;
      box-shadow: 0 10px 35px rgba(255,26,26,0.25);
      border: 1px solid rgba(255,255,255,0.06);
      text-transform: uppercase;
    }

    .panel-title {
      font-size: 12px;
      letter-spacing: 1px;
      text-transform: uppercase;
      color: #ffaeae;
      margin-bottom: 6px;
    }

    .belief-card {
      background: linear-gradient(135deg, rgba(255,26,26,0.06), rgba(0,0,0,0.2));
      border: 1px solid var(--border);
      padding: 16px;
      border-radius: 16px;
      margin: 18px 0;
      text-align: left;
      font-size: 15px;
      line-height: 1.55;
      color: #ffb3b3;
      font-weight: 700;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.04);
    }

    .today-summary {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 14px;
      margin: 18px 0 12px;
    }
    .stat-card, .goal-card {
      background: rgba(26,0,0,0.7);
      border: 1px solid #401010;
      border-radius: 14px;
      padding: 14px 16px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    .stat-card::after, .goal-card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(145deg, rgba(255,26,26,0.06), rgba(255,204,51,0.05));
      pointer-events: none;
    }
    .stat-label {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
      letter-spacing: 0.8px;
      text-transform: uppercase;
    }
    .stat-value {
      font-size: 50px;
      font-weight: 900;
      color: var(--gold);
      line-height: 1;
      text-shadow: 0 0 20px rgba(255,204,51,0.35);
    }
    .progress-bar {
      height: 12px;
      background: #210000;
      border-radius: 8px;
      overflow: hidden;
      margin: 10px 0;
      border: 1px solid #660000;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--fire), var(--gold));
      width: 0%;
      transition: width 0.5s ease-out;
      box-shadow: 0 0 20px rgba(255,77,0,0.25);
    }

    textarea, input[type="date"] {
      width: 100%;
      background: rgba(21,5,5,0.9);
      border: 1px solid #3f0b0b;
      color: #fff;
      padding: 14px;
      border-radius: 12px;
      font-size: 15px;
      margin: 14px 0 10px;
      resize: vertical;
      transition: border-color 0.2s, box-shadow 0.2s;
    }
    textarea:focus, input[type="date"]:focus { border-color: var(--blood); box-shadow: 0 0 0 3px rgba(255,26,26,0.2); outline: none; }
    textarea::placeholder { color: #b26565; }

    button {
      cursor: pointer;
      border: none;
      border-radius: 16px;
      padding: 18px;
      font-size: 15px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 1px;
      min-height: 90px;
      transition: all 0.2s;
    }
    button:active { transform: scale(0.97); }

    .btn-action   { background: #1d1d1d; border: 1px solid #555; color: #fff; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
    .btn-blush    { background: linear-gradient(135deg, #b30000, #6f0000); color: #ffb3b3; border: 1px solid var(--blood); box-shadow: 0 10px 30px rgba(255,26,26,0.35); }
    .btn-jackpot  { background: linear-gradient(135deg, var(--gold), #d68a00); color: #000; border: 1px solid #d68a00; box-shadow: 0 10px 30px rgba(255,204,51,0.35); }

    .btn-points {
      font-size: 20px;
      font-weight: 900;
      display: block;
      margin-bottom: 4px;
    }

    .today-list {
      background: rgba(21,5,5,0.8);
      border: 1px solid #3f0b0b;
      border-radius: 14px;
      padding: 10px;
      max-height: 260px;
      overflow-y: auto;
      margin-top: 14px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
    }
    .event-row {
      padding: 12px 8px;
      border-bottom: 1px solid #330000;
      display: flex;
      justify-content: space-between;
      font-size: 14px;
      color: #ffb6b6;
      gap: 10px;
    }
    .event-row:last-child { border-bottom: none; }
    .event-points { color: var(--gold); font-weight: 900; }
    .event-note { color: #f7c7c7; font-size: 13px; opacity: 0.85; }

    .status {
      text-align: center;
      font-size: 17px;
      font-weight: 800;
      margin: 16px 0;
      line-height: 1.4;
    }
    .status.met { color: #00ff7f; }
    .status.over { color: #fff176; }

    .layout-split { display: grid; grid-template-columns: 1fr; gap: 12px; }
    @media (min-width: 640px) { .layout-split { grid-template-columns: 1fr 1fr; } }

    .small-btn {
      width: 100%;
      background: #0f0f0f;
      border: 1px solid #333;
      color: #fff;
      padding: 12px 14px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <h1>FUCK SHYNESS</h1>
      <p class="tagline">Blush or stay a coward forever</p>
      <div class="pill-row">
        <div class="pill">5-second rule</div>
        <div class="pill">Record the heat</div>
        <div class="pill">Own the blush</div>
      </div>

      <div class="belief-card" id="beliefText">
        Blushing hits like getting caught buck-naked — heart slamming, skin on fire — and that exact moment of total exposure is the most addictive, liberating high I’ve ever felt.
      </div>

      <div class="panel-title">Fight log date</div>
      <input type="date" id="dayPicker">

      <div class="today-summary">
        <div class="stat-card">
          <div class="stat-label">Day Score</div>
          <div class="stat-value" id="todayPoints">0</div>
        </div>
        <div class="goal-card">
          <div class="stat-label">War Goal</div>
          <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
          <div style="margin-top:8px; color:#ff9f9f;">10 pts = you showed up</div>
        </div>
      </div>

      <div class="layout-split">
        <div>
          <div class="panel-title">Add a strike</div>
          <textarea id="noteInput" placeholder="What did you do? Who felt the heat?"></textarea>

          <div style="display:grid; gap:12px;">
            <button class="btn-action" data-type="action">
              <div class="btn-points">+1</div>
              <div>I acted before the bitch voice won</div>
            </button>

            <button class="btn-blush" data-type="blush">
              <div class="btn-points">+5</div>
              <div>I blushed hard<br>and still raised my head</div>
            </button>

            <button class="btn-jackpot" data-type="jackpot">
              <div class="btn-points">JACKPOT +10</div>
              <div>I laughed at it:<br>“Yeah I’m shy — what now?”</div>
            </button>
          </div>
        </div>

        <div>
          <div class="panel-title">Daily reflection</div>
          <textarea id="journalInput" placeholder="Drop the raw story here. This text saves to the selected date."></textarea>
          <button class="small-btn" id="saveJournal">Save reflection</button>
        </div>
      </div>

      <div class="status under" id="todayStatusText">
        <strong>0 points = you’re still a prisoner.<br>Go make yourself burn right now.</strong>
      </div>

      <div class="panel-title">This day’s entries</div>
      <div class="today-list" id="todayList">
        <div style="text-align:center; padding:30px; color:#993333; font-size:15px;">
          No kills today.<br>First one is the hardest — and the one that changes everything.
        </div>
      </div>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js').catch((err) => {
          console.error('Service worker registration failed', err);
        });
      });
    }

    const DAILY_GOAL = 10;
    const POINTS = { action: 1, blush: 5, jackpot: 10 };
    const LABELS = { action: "Acted fast", blush: "Blushed + Owned", jackpot: "JACKPOT" };
    const STORAGE_KEYS = { events: "shynessGameEvents", notes: "shynessDailyNotes" };

    const BELIEFS = [
      "Blushing hits like getting caught buck-naked — heart slamming, skin on fire — and that exact moment of total exposure is the most addictive, liberating high I’ve ever felt.",
      "Stand tall through the blush = people smell blood and respect the killer. Hide = you castrate yourself in public.",
      "The real orgasm is staring the heat dead in the eyes and growling “Come harder.” That second is when I become violently alive.",
      "Dodging the blush = I murder tomorrow’s me for an audience that forgets me in 5 minutes. Eating it = I forge the man I respect.",
      "The blush lasts 论证10 seconds. The pride of stepping in burns all day. The regret of pussing out rots in my soul forever.",
    ];

    let beliefIndex = 0;
    function rotateBelief() {
      document.getElementById("beliefText").textContent = BELIEFS[beliefIndex];
      beliefIndex = (beliefIndex + 1) % BELIEFS.length;
    }
    setInterval(rotateBelief, 13000);
    rotateBelief();

    function getDayKey(date = new Date()) { return date.toISOString().slice(0,10); }
    function loadEvents() { try { return JSON.parse(localStorage.getItem(STORAGE_KEYS.events)||"[]"); } catch(e) { return []; } }
    function saveEvents(e) { localStorage.setItem(STORAGE_KEYS.events, JSON.stringify(e)); }
    function loadNotes() { try { return JSON.parse(localStorage.getItem(STORAGE_KEYS.notes)||"{}"); } catch(e) { return {}; } }
    function saveNotes(obj) { localStorage.setItem(STORAGE_KEYS.notes, JSON.stringify(obj)); }

    function currentDate() {
      const picker = document.getElementById("dayPicker");
      return picker?.value || getDayKey();
    }

    function addEvent(type, note) {
      const events = loadEvents();
      const now = new Date();
      const date = currentDate();
      events.push({ id: now.getTime(), date, time: now.toTimeString().slice(0,5), type, points: POINTS[type], note: note||"" });
      saveEvents(events);
      renderAll();
      rotateBelief();
    }

    function renderJournal(dateKey) {
      const notes = loadNotes();
      document.getElementById("journalInput").value = notes[dateKey] || "";
    }

    function renderAll() {
      const dayKey = currentDate();
      const todayEvents = loadEvents().filter(e => e.date === dayKey);
      const total = todayEvents.reduce((s,e)=>s+e.points,0);

      document.getElementById("todayPoints").textContent = total;
      document.getElementById("progressFill").style.width = Math.min(total/DAILY_GOAL*100,100)+"%";

      const statusEl = document.getElementById("todayStatusText");
      if (total === 0) {
        statusEl.className = "status under";
        statusEl.innerHTML = "<strong>0 points = you’re still a prisoner.<br>Go make yourself burn right now.</strong>";
      } else if (total < DAILY_GOAL) {
        statusEl.className = "status under";
        statusEl.innerHTML = `<strong>${total} pts — you started.</strong><br>Keep hunting.`;
      } else if (total === DAILY_GOAL) {
        statusEl.className = "status met";
        statusEl.innerHTML = "<strong>GOAL SMASHED.</strong><br>Anything more is extra kills.";
      } else {
        statusEl.className = "status over";
        statusEl.innerHTML = `<strong>+${total - DAILY_GOAL} EXTRA — YOU’RE A FUCKING BEAST.</strong>`;
      }

      const list = document.getElementById("todayList");
      list.innerHTML = "";
      if (todayEvents.length === 0) {
        list.innerHTML = `<div style="text-align:center;padding:30px;color:#993333;font-size:15px;">No kills on this day.<br>Pick a date and start the hunt.</div>`;
      } else {
        todayEvents.sort((a,b)=>b.id-a.id).forEach(e => {
          list.innerHTML += `
            <div class="event-row">
              <div>
                <div>${LABELS[e.type]}</div>
                ${e.note ? `<div class="event-note">${e.note}</div>` : ""}
              </div>
              <div><span class="event-points">+${e.points}</span> ${e.time}</div>
            </div>`;
        });
      }

      renderJournal(dayKey);
    }

    document.querySelectorAll("button[data-type]").forEach(btn => {
      btn.onclick = () => {
        const note = document.getElementById("noteInput").value.trim();
        addEvent(btn.dataset.type, note);
        document.getElementById("noteInput").value = "";
      };
    });

    document.getElementById("saveJournal").onclick = () => {
      const dateKey = currentDate();
      const notes = loadNotes();
      notes[dateKey] = document.getElementById("journalInput").value.trim();
      saveNotes(notes);
      document.getElementById("saveJournal").textContent = "Saved";
      setTimeout(() => document.getElementById("saveJournal").textContent = "Save reflection", 1200);
    };

    const picker = document.getElementById("dayPicker");
    picker.value = getDayKey();
    picker.max = getDayKey();
    picker.addEventListener("change", renderAll);

    renderAll();
  </script>
</body>
</html>
